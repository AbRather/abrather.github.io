<section id="skills" class="skills">
    <div class="container" data-aos="fade-up">

        <div class="section-title">
            <h2><span data-i18n="skills.skills">SKILLS</span></h2>
            <p><span data-i18n="skills.description">A list of technical and social expertise that I have picked up over the years.</span></p>
        </div>

        <div class="row skills-content">

            <div class="col-lg-6">
                {% assign half = site.data.skills.size | divided_by: 2 %}
                {% for skill in site.data.skills limit:half %}
                <div class="progress">
                    <span class="skill">{{ skill.name }} <i class="val">{{ skill.percentage }}%</i></span>
                    <div class="progress-bar-wrap">
                        <div class="progress-bar" role="progressbar" aria-valuenow="{{ skill.percentage }}" aria-valuemin="0" aria-valuemax="100" data-target="{{ skill.percentage }}" style="--target-width: {{ skill.percentage }}%;"></div>
                    </div>
                </div>
                {% endfor %}
            </div>

            <div class="col-lg-6">
                {% for skill in site.data.skills offset:half %}
                <div class="progress">
                    <span class="skill">{{ skill.name }} <i class="val">{{ skill.percentage }}%</i></span>
                    <div class="progress-bar-wrap">
                        <div class="progress-bar" role="progressbar" aria-valuenow="{{ skill.percentage }}" aria-valuemin="0" aria-valuemax="100" data-target="{{ skill.percentage }}" style="--target-width: {{ skill.percentage }}%;"></div>
                    </div>
                </div>
                {% endfor %}
            </div>

        </div>

    </div>
</section>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const skillsSection = document.getElementById('skills');
    
    function animateSkills() {
        const progressBars = skillsSection.querySelectorAll('.progress-bar');
        progressBars.forEach(bar => {
            bar.classList.add('animated');
        });
    }
    
    function resetSkills() {
        const progressBars = skillsSection.querySelectorAll('.progress-bar');
        progressBars.forEach(bar => {
            bar.classList.remove('animated');
        });
    }
    
    // Check if skills section is in viewport
    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                // Reset and animate when entering viewport
                resetSkills();
                setTimeout(() => {
                    animateSkills();
                }, 50);
            } else {
                // Reset when leaving viewport
                resetSkills();
            }
        });
    }, { threshold: 0.2 });
    
    if (skillsSection) {
        observer.observe(skillsSection);
    }
});
</script>
